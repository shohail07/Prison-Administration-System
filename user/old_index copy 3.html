<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="../assets/css/style.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css" />
  

    <title>Dashboard</title>
  </head>
  <body>

    <section id="user_dashboard">
        <div id="menus">
                <div class="logo-bar">
                    <div class="logo">PMS</div>
                    <div class="text-center">Prison management system</div>
                    <hr>
                </div>
                <div class="user_profile">
                    <img src="../assets\bulid_img\o.jpg" alt="" width="100%" class="user_img">
                    <div class="user_name"> Supto</div>
                    <div class="list_menus">
                        <ul>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Dashboard</a></li>

                    </div>
                </div>
        </div>
        <div id="dashboards">
            <div class="bar">
                <div class="page_name ">Account Settings</div>
                <div class="user_role_name">Admin</div>
            </div>
            <div class="data_show  personal">
                
              <div class="container">
                <h1>Edit Profile</h1>
                <hr>
                <div class="alert alert-info alert-dismissable">
                  <a class="panel-close close" data-dismiss="alert">Ã—</a> 
                  <i class="fa fa-coffee"></i>
                  This is an <strong>.alert</strong>. Use this to show important messages to the user.
                </div>
              <form  method="POST" enctype="multipart/form-data">
                <div class="row" style="overflow: hidden;height: 60vh;overflow-y: scroll;">
                  <!-- left column -->
                  <div class="col-md-3 overflow-hidden">
                    <div class="text-center">
                      <div id="preview"><img src="../assets/user_img/o.jpg" class="avatar img-circle" width="250px" height="250px" alt="avatar"></div>
                      <h6>Upload a different photo...</h6>
                      
                      <input type="file" id="profile_upload" name="profile_upload" class="form-control"  accept="image/*">
                    </div>
                  </div>
                  
                  <!-- edit form column -->
                  <div class="col-md-9 personal-info">
                    
                    <h3>Personal info</h3>
                    <div class="form-group">
                      <label class="col-lg-3 control-label">First name:</label>
                      <div class="col-lg-8">
                        <input class="form-control" type="text" value="Jane">
                      </div>
                    </div>
                    
                    <div class="form-group">
                      <label class="col-lg-3 control-label">Company:</label>
                      <div class="col-lg-8">
                        <input class="form-control" type="text" value="">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-lg-3 control-label">Email:</label>
                      <div class="col-lg-8">
                        <input class="form-control " type="text" id="aa" value="janesemail@gmail.com">
                        <div class="d-flex verify_cover">
                          <a href="#" class="btn btn-primary p-lg-1 verify">verify</a>
                          <div class="d-flex verify_under">
                            <input class="form-control" type="text" value="" >
                            <a href="#" class="d-block pl-2">ssss</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-lg-3 control-label">Time Zone:</label>
                      <div class="col-lg-8">
                        <div class="ui-select">
                          <select id="user_time_zone" class="form-control">
                            <option value="Hawaii">(GMT-10:00) Hawaii</option>
                            <option value="Alaska">(GMT-09:00) Alaska</option>
                            <option value="Pacific Time (US &amp; Canada)">(GMT-08:00) Pacific Time (US &amp; Canada)</option>
                            <option value="Arizona">(GMT-07:00) Arizona</option>
                            <option value="Mountain Time (US &amp; Canada)">(GMT-07:00) Mountain Time (US &amp; Canada)</option>
                            <option value="Central Time (US &amp; Canada)" selected="selected">(GMT-06:00) Central Time (US &amp; Canada)</option>
                            <option value="Eastern Time (US &amp; Canada)">(GMT-05:00) Eastern Time (US &amp; Canada)</option>
                            <option value="Indiana (East)">(GMT-05:00) Indiana (East)</option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-3 control-label">Username:</label>
                      <div class="col-md-8">
                        <input class="form-control" type="text" value="janeuser">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-3 control-label">Password:</label>
                      <div class="col-md-8">
                        <input class="form-control" type="password" value="11111122333">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-3 control-label">Confirm password:</label>
                      <div class="col-md-8">
                        <input class="form-control" type="password" value="11111122333">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-md-3 control-label"></label>
                      <div class="col-md-8">
                        <input type="button" class="btn btn-primary" value="Save Changes">
                        <span></span>
                        <input type="reset" class="btn btn-default" value="Cancel">
                      </div>
                    </div>
                    
                    
                  </div>
                </div>
              </form>
            </div>
            <hr>  
            
            </div>

        </div>
    </section>




    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>
    
    <script>
     $(document).ready(function () {
        $("#profile_upload").change(function (e) {
          var file = this.files[0];
          console.log(file);
          // Create a new FileReader object
          var reader = new FileReader();
          console.log(reader);
          // Set the callback function for when the reader has finished reading the file
          reader.onload = function(event) {
            // Create a new image element and set its source to the data URL
            var img = $('<img>').attr('src', event.target.result).attr('class', 'avatar img-circle').attr('width', '250px').attr('height', '250px').attr('alt', 'avatar');
            
            // Append the image to the preview element
            $('#preview').html(img);
          };
          
          // Read the file as a data URL
          reader.readAsDataURL(file); 
          e.preventDefault();
          
        });
        
        $('.verify').show();
        var old_a = $('#aa').val();
        $('#aa').change(function (e) {
          $('.verify').text('Verify');
          var btn_verify = $(this).val();
          btn_verify = btn_verify.replace(/\s+/g, '');;
          console.log(btn_verify);
          if (btn_verify =='') {
            $('#aa').addClass('is-invalid');
            $('#aa').removeClass('is-valid');
            $('.verify').hide();
          }else if(old_a == btn_verify){
            $('.verify').hide();
            $('#aa').removeClass('is-invalid');
            $('#aa').removeClass('is-valid');
          }else{
            $('.verify').show();
            $('#aa').removeClass('is-invalid');
          }
          
          $('.verify').click(function (e) { 
            console.log(btn_verify);
            e.preventDefault();
            $.ajax({
              type: "POST",
              url: "edit_acc.php",
              data: {'mail': btn_verify, 'verify': 'send_code'},
              dataType: "text",
              beforeSend: function() {
                        
                $('.verify').text('sent code');
                    },
              success: function (response) {
                $('.verify').text(response);
              }
            });
          });
        });


      });
    </script>
  </body>
</html>